<!DOCTYPE html>
<html lang="Zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>简单的轮播</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="js/carousel.js"></script>
</head>
<body>
    <div class="content">
        <div class="window">
            <div class="images" id="images">
                <a href="#">
                    <img src="https://i.loli.net/2019/03/19/5c9062ae2ca54.jpg" alt="" style="width:710px; height:300px">
                </a>
                <a href="#">
                    <img src="https://i.loli.net/2019/03/19/5c9062b11e9b1.jpg" alt="" style="width:710px; height:300px">
                </a>
                <a href="#">
                    <img src="https://i.loli.net/2019/03/19/5c9062b2eb024.jpg" alt="" style="width:710px; height:300px">
                </a>
            </div>
        </div>
        <div id="buttons">
            <span>1</span>
            <span>2</span>
            <span>3</span>
        </div>
    </div>
    <script>
        //点击无限张图片进行轮播

        var allButtons = $('#buttons > span')

        for(let i=0; i<allButtons.length; i++){
        $(allButtons[i]).on('click', function(x){
            var index = $(x.currentTarget).index() //用jQuery方法获取到当前点击的按钮在所有按钮中排行第几
            $('#images').css({
            transform:'translateX('+ index * -710 +'px)'
            })
            n = index
            activeButton(allButtons.eq(n))
        })
        }



        //自动播放轮播
        var n = 0;
        var size = allButtons.length
        playSlide(n%size)
        
        var timeId = setTime()

        function setTime(){
            setInterval(()=>{
            n += 1 
            playSlide(n%size)
        },3000)   //延时2s播放下一个按钮的轮播
        }


        function playSlide(number){
        allButtons.eq(number).trigger('click')
        activeButton(allButtons.eq(number))
        }

        function activeButton($button){
        $button
            .addClass('btn-on')
            .siblings('.btn-on')
            .removeClass('btn-on')
        }

        
        $('.window').on('mouseenter', function() {
        window.clearInterval(timeId)
        })

        $('.window').on('mouseleave', function() {
            timeId = setTime()
        })


    </script>
    
</body>
</html>